# âš¡ 2721. Execute Asynchronous Functions in Parallel (à¦…à§à¦¯à¦¾à¦¸à¦¿à¦™à§à¦•à§à¦°à§‹à¦¨à¦¾à¦¸ à¦«à¦¾à¦‚à¦¶à¦¨ à¦à¦•à¦¸à¦¾à¦¥à§‡ à¦šà¦¾à¦²à¦¾à¦¨à§‹)

## ðŸ§  à¦¸à¦®à¦¸à§à¦¯à¦¾ à¦¬à¦¿à¦¬à¦°à¦£

à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦à¦•à¦Ÿà¦¿ à¦…à§à¦¯à¦¾à¦°à§‡ `functions` à¦¦à§‡à¦“à¦¯à¦¼à¦¾ à¦†à¦›à§‡, à¦¯à§‡à¦–à¦¾à¦¨à§‡ à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ item à¦à¦•à¦Ÿà¦¿ **asynchronous function**à¥¤

- à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦«à¦¾à¦‚à¦¶à¦¨ à¦•à§‹à¦¨ argument à¦¨à§‡à¦¯à¦¼ à¦¨à¦¾ à¦à¦¬à¦‚ à¦à¦•à¦Ÿà¦¿ Promise à¦°à¦¿à¦Ÿà¦¾à¦°à§à¦¨ à¦•à¦°à§‡à¥¤
- à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦à¦•à¦Ÿà¦¿ à¦¨à¦¤à§à¦¨ Promise à¦°à¦¿à¦Ÿà¦¾à¦°à§à¦¨ à¦•à¦°à¦¤à§‡ à¦¹à¦¬à§‡ à¦¯à¦¾ à¦¸à¦¬ à¦«à¦¾à¦‚à¦¶à¦¨ à¦à¦•à¦¸à¦¾à¦¥à§‡ (parallel) execute à¦•à¦°à¦¬à§‡à¥¤

**à¦ªà¦¦à§à¦§à¦¤à¦¿:**

1. **promise resolve à¦¹à¦¬à§‡:**

   - à¦¯à¦–à¦¨ à¦…à§à¦¯à¦¾à¦°à§‡à¦° à¦¸à¦¬ à¦«à¦¾à¦‚à¦¶à¦¨ à¦¸à¦«à¦²à¦­à¦¾à¦¬à§‡ resolve à¦¹à¦¬à§‡à¥¤
   - resolved value à¦¹à¦¬à§‡ à¦¸à§‡à¦‡ à¦«à¦¾à¦‚à¦¶à¦¨à§‡à¦° resolved values à¦à¦° à¦…à§à¦¯à¦¾à¦°à§‡, original order à¦…à¦¨à§à¦¸à¦¾à¦°à§‡à¥¤

2. **promise reject à¦¹à¦¬à§‡:**
   - à¦¯à¦¦à¦¿ à¦•à§‹à¦¨à§‹ à¦à¦•à¦Ÿà¦¿ à¦«à¦¾à¦‚à¦¶à¦¨ reject à¦¹à¦¯à¦¼à¥¤
   - reject value à¦¹à¦¬à§‡ à¦ªà§à¦°à¦¥à¦® rejection à¦à¦° reasonà¥¤

> **à¦¨à§‹à¦Ÿ:** `Promise.all` à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à¦¾ à¦¯à¦¾à¦¬à§‡ à¦¨à¦¾à¥¤

---

## âš™ï¸ Function Signature

```js
function promiseAll(functions) {
  return new Promise((resolve, reject) => {
    const results = [];
    let completed = 0;
    let hasRejected = false;

    functions.forEach((fn, index) => {
      fn()
        .then((res) => {
          if (hasRejected) return;
          results[index] = res;
          completed++;
          if (completed === functions.length) resolve(results);
        })
        .catch((err) => {
          if (!hasRejected) {
            hasRejected = true;
            reject(err);
          }
        });
    });
  });
}
```

---

## Example

```js
Example 1:

Input: functions = [
  () => new Promise(resolve => setTimeout(() => resolve(5), 200))
]
Output: {"t": 200, "resolved": [5]}
Explanation:
promiseAll(functions).then(console.log); // [5]

The single function was resolved at 200ms with a value of 5.
Example 2:

Input: functions = [
    () => new Promise(resolve => setTimeout(() => resolve(1), 200)),
    () => new Promise((resolve, reject) => setTimeout(() => reject("Error"), 100))
]
Output: {"t": 100, "rejected": "Error"}
Explanation: Since one of the promises rejected, the returned promise also rejected with the same error at the same time.
Example 3:

Input: functions = [
    () => new Promise(resolve => setTimeout(() => resolve(4), 50)),
    () => new Promise(resolve => setTimeout(() => resolve(10), 150)),
    () => new Promise(resolve => setTimeout(() => resolve(16), 100))
]
Output: {"t": 150, "resolved": [4, 10, 16]}
Explanation: All the promises resolved with a value. The returned promise resolved when the last promise resolved.
```

## ðŸ§° à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦‰à¦¦à¦¾à¦¹à¦°à¦£

```js
/**************************70msðŸ˜Ž**************************/
function promiseAll(n) {
  return new Promise((t, e) => {
    const { length: c } = n;
    let o = 0;
    const r = [];
    n.forEach((n, h) => {
      n()
        .then((n) => {
          (r[h] = n), o++, o === c && t(r);
        })
        .catch(e);
    });
  });
}
```
